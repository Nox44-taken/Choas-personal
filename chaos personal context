// Your "Context" tab should look like this
const modifier = (text) => {
  // First process AutoCards

  text = onContext_TAS(text);
   text = LocalizedLanguages("context", text);
  
  const result = onContext_Combined(text, stop);

 text = ParagraphFix("context", text);

  
  // --- AutoCards for Context ---
  
  if (typeof text !== "string") {
    text = typeof text === "object" && text.text ? text.text : String(text);
  }
  if (typeof output !== "undefined") output.push("[DEBUG] AutoCards processed.");

  // --- Compose Final Output ---

   // --- Clock String ---
  let clockString = typeof getClockString === "function"
    ? getClockString()
    : (globalThis.getClockString ? globalThis.getClockString() : "");

  let timeSummary = "";
  if (clockString) timeSummary = `It is currently ${clockString}.`;
  //add the result

  // Build final context
  const contextText = [

    timeSummary,
      text,
      clockString ? `[Clock]: ${clockString}` : ""
  ].filter(Boolean).join("\n\n")



return {
  text:  contextText + result.text,
  stop: result.stop
  };
};

// Don't modify this part
modifier(text);
